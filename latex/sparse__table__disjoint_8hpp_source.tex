\doxysection{sparse\+\_\+table\+\_\+disjoint.\+hpp}
\hypertarget{sparse__table__disjoint_8hpp_source}{}\label{sparse__table__disjoint_8hpp_source}\index{data\_structure/sparse\_table\_disjoint.hpp@{data\_structure/sparse\_table\_disjoint.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#include\ "{}../../kyopro\_library/template.hpp"{}}}
\DoxyCodeLine{00002\ }
\DoxyCodeLine{00005\ \textcolor{keyword}{template}<\textcolor{keyword}{typename}\ Semigroup>}
\DoxyCodeLine{00006\ \textcolor{keyword}{struct\ }SparseTableDisjoint\ \{}
\DoxyCodeLine{00007\ \ \ \ \ \textcolor{keyword}{using\ }Type=\textcolor{keyword}{typename}\ Semigroup::Type;}
\DoxyCodeLine{00008\ \ \ \ \ SparseTableDisjoint()=\textcolor{keywordflow}{default};}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00012\ \ \ \ \ \mbox{\hyperlink{struct_sparse_table_disjoint_a48075adf65cef80776b5c5ad914240d5}{SparseTableDisjoint}}(\textcolor{keyword}{const}\ vector<Type>\&\ v)\ \{}
\DoxyCodeLine{00013\ \ \ \ \ \ \ \ \ n=v.size();}
\DoxyCodeLine{00014\ \ \ \ \ \ \ \ \ dat.assign(\_\_lg(n)+1,vector<Type>(n));}
\DoxyCodeLine{00015\ \ \ \ \ \ \ \ \ dat[0]=v;}
\DoxyCodeLine{00016\ \ \ \ \ \ \ \ \ FOR(i,1,dat.size())\ \{}
\DoxyCodeLine{00017\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ w=1<<i;}
\DoxyCodeLine{00018\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ j=0;\ j<n;\ j+=w<<1)\ \{}
\DoxyCodeLine{00019\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ t=min(j+w,n);}
\DoxyCodeLine{00020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dat[i][t-\/1]=v[t-\/1];}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ k=t-\/2;\ k>=j;\ k-\/-\/)\ dat[i][k]=Semigroup::op(v[k],dat[i][k+1]);}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(t>=n)\ \textcolor{keywordflow}{break};}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ dat[i][t]=v[t];}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ k=t+1;\ k<min(j+(w<<1),n);\ k++)\ dat[i][k]=Semigroup::op(dat[i][k-\/1],v[k]);}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00027\ \ \ \ \ \}}
\DoxyCodeLine{00028\ }
\DoxyCodeLine{00031\ \ \ \ \ Type\ \mbox{\hyperlink{struct_sparse_table_disjoint_aa984a0d78a9e15251a151cbb8953d10e}{fold}}(\textcolor{keywordtype}{int}\ l,\ \textcolor{keywordtype}{int}\ r)\ \{}
\DoxyCodeLine{00032\ \ \ \ \ \ \ \ \ r-\/-\/;}
\DoxyCodeLine{00033\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}(l==r)\ \textcolor{keywordflow}{return}\ dat[0][l];}
\DoxyCodeLine{00034\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ i=\_\_lg(l\string^r);}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ Semigroup::op(dat[i][l],dat[i][r]);}
\DoxyCodeLine{00036\ \ \ \ \ \}}
\DoxyCodeLine{00037\ }
\DoxyCodeLine{00039\ \ \ \ \ Type\ \mbox{\hyperlink{struct_sparse_table_disjoint_abace0a4798ea72d6d063b68b4b218ff1}{operator[]}}(\textcolor{keywordtype}{int}\ i)\textcolor{keyword}{\ const\ }\{\ \textcolor{keywordflow}{return}\ \mbox{\hyperlink{struct_sparse_table_disjoint_aa984a0d78a9e15251a151cbb8953d10e}{fold}}(i,i+1);\ \}}
\DoxyCodeLine{00040\ }
\DoxyCodeLine{00042\ \ \ \ \ \textcolor{keywordtype}{int}\ \mbox{\hyperlink{struct_sparse_table_disjoint_a0b726f6dedf26f0b28affebff1e0674d}{size}}()\ \{\ \textcolor{keywordflow}{return}\ n;\ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00045\ \ \ \ \ \textcolor{keywordtype}{int}\ n;}
\DoxyCodeLine{00046\ \ \ \ \ vector<vector<Type>>\ dat;}
\DoxyCodeLine{00047\ \};}

\end{DoxyCode}
